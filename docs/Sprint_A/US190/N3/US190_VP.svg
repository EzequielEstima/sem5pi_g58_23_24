<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="877px" preserveAspectRatio="none" style="width:1304px;height:877px;background:#FFFFFF;" version="1.1" viewBox="0 0 1304 877" width="1304px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="760.6953" style="stroke:#181818;stroke-width:1.0;" width="10" x="112" y="69.9609"/><rect fill="#FFFFFF" height="684.9922" style="stroke:#181818;stroke-width:1.0;" width="10" x="360" y="100.3125"/><rect fill="#FFFFFF" height="479.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="678.5" y="173.2734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="844.5" y="203.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="264.3281"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1166" y="385.7344"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1256" y="325.0313"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="457" x="3" y="668.0625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="116.5" x2="116.5" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="365" x2="365" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="538" x2="538" y1="139.6172" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="683" x2="683" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="849" x2="849" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="935" x2="935" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1041.5" x2="1041.5" y1="455.3906" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1097.5" x2="1097.5" y1="498" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1170.5" x2="1170.5" y1="37.6094" y2="840.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1260.5" x2="1260.5" y1="37.6094" y2="840.6563"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="77.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="84.5" y="26.5332">PisoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="77.5" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="84.5" y="861.1895">PisoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="280" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="287" y="26.5332">controller: PisoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="280" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="287" y="861.1895">controller: PisoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="473" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="480" y="861.1895">dto: CriarPisoDTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="613" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="620" y="26.5332">service: PisoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="613" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="620" y="861.1895">service: PisoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="803" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="810" y="26.5332">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="803" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="810" y="861.1895">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="906" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="913" y="26.5332">Edificio</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="59" x="906" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="913" y="861.1895">Edificio</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1016.5" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1023.5" y="861.1895">Ponto</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="1077.5" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1084.5" y="861.1895">Piso</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="1128.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1135.5" y="26.5332">PontoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="1128.5" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1135.5" y="861.1895">PontoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1223.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1230.5" y="26.5332">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1223.5" y="839.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1230.5" y="861.1895">PisoRepo</text><rect fill="#FFFFFF" height="760.6953" style="stroke:#181818;stroke-width:1.0;" width="10" x="112" y="69.9609"/><rect fill="#FFFFFF" height="684.9922" style="stroke:#181818;stroke-width:1.0;" width="10" x="360" y="100.3125"/><rect fill="#FFFFFF" height="479.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="678.5" y="173.2734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="844.5" y="203.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="930.5" y="264.3281"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1166" y="385.7344"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1256" y="325.0313"/><ellipse cx="7.5" cy="69.2109" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="100,65.9609,110,69.9609,100,73.9609,104,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="12" x2="106" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="15" y="65.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="26" y="65.1045">POST(json)</text><polygon fill="#181818" points="348,96.3125,358,100.3125,348,104.3125,352,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="122" x2="354" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="129" y="95.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="140" y="95.4561">criarPiso(Request, Response, Next)</text><polygon fill="#181818" points="461,126.6641,471,130.6641,461,134.6641,465,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="370" x2="467" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="377" y="125.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="388" y="125.8076">create(json)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="473" y="108.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="480" y="129.8457">dto: CriarPisoDTO</text><polygon fill="#181818" points="666.5,169.2734,676.5,173.2734,666.5,177.2734,670.5,173.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="370" x2="672.5" y1="173.2734" y2="173.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="377" y="168.417">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="388" y="168.417">criarPiso(criarPisoDTO)</text><polygon fill="#181818" points="832.5,199.625,842.5,203.625,832.5,207.625,836.5,203.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="838.5" y1="203.625" y2="203.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="695.5" y="198.7686">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="706.5" y="198.7686">findByDomain(codigo)</text><polygon fill="#181818" points="699.5,229.9766,689.5,233.9766,699.5,237.9766,695.5,233.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693.5" x2="848.5" y1="233.9766" y2="233.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="705.5" y="229.1201">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="716.5" y="229.1201">edificio</text><polygon fill="#181818" points="918.5,260.3281,928.5,264.3281,918.5,268.3281,922.5,264.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="924.5" y1="264.3281" y2="264.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="695.5" y="259.4717">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="706.5" y="259.4717">verificaSePisoJaExiste(nPiso)</text><polygon fill="#181818" points="699.5,290.6797,689.5,294.6797,699.5,298.6797,695.5,294.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693.5" x2="934.5" y1="294.6797" y2="294.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="705.5" y="289.8232">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="716.5" y="289.8232">flag</text><polygon fill="#181818" points="1244,321.0313,1254,325.0313,1244,329.0313,1248,325.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1250" y1="325.0313" y2="325.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="695.5" y="320.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="706.5" y="320.1748">getMaxId()</text><polygon fill="#181818" points="699.5,351.3828,689.5,355.3828,699.5,359.3828,695.5,355.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693.5" x2="1260" y1="355.3828" y2="355.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="705.5" y="350.5264">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="723.5" y="350.5264">maxId</text><polygon fill="#181818" points="1154,381.7344,1164,385.7344,1154,389.7344,1158,385.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1160" y1="385.7344" y2="385.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="380.8779">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="713.5" y="380.8779">getMaxId()</text><polygon fill="#181818" points="699.5,412.0859,689.5,416.0859,699.5,420.0859,695.5,416.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693.5" x2="1170" y1="416.0859" y2="416.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="705.5" y="411.2295">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="723.5" y="411.2295">pontoId</text><polygon fill="#181818" points="1004.5,442.4375,1014.5,446.4375,1004.5,450.4375,1008.5,446.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1010.5" y1="446.4375" y2="446.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="441.5811">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="713.5" y="441.5811">criar(tipoPonto, descricao, coordenadas, IdPonto)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1016.5" y="424.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1023.5" y="445.6191">Ponto</text><polygon fill="#181818" points="1065.5,485.0469,1075.5,489.0469,1065.5,493.0469,1069.5,489.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1071.5" y1="489.0469" y2="489.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="484.1904">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="713.5" y="484.1904">create(nPiso, descricao, listaPontos, maxId)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41" x="1077.5" y="466.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1084.5" y="488.2285">Piso</text><polygon fill="#181818" points="923.5,527.6563,933.5,531.6563,923.5,535.6563,927.5,531.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="929.5" y1="531.6563" y2="531.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="526.7998">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="713.5" y="526.7998">addPiso(piso)</text><polygon fill="#181818" points="1159,558.0078,1169,562.0078,1159,566.0078,1163,562.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1165" y1="562.0078" y2="562.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="557.1514">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="713.5" y="557.1514">save(ponto)</text><polygon fill="#181818" points="1249,588.3594,1259,592.3594,1249,596.3594,1253,592.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="1255" y1="592.3594" y2="592.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="587.5029">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="713.5" y="587.5029">save(piso)</text><polygon fill="#181818" points="837.5,618.7109,847.5,622.7109,837.5,626.7109,841.5,622.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="843.5" y1="622.7109" y2="622.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="695.5" y="617.8545">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="713.5" y="617.8545">save(edificio)</text><polygon fill="#181818" points="381,649.0625,371,653.0625,381,657.0625,377,653.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="375" x2="682.5" y1="653.0625" y2="653.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="387" y="648.2061">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="405" y="648.2061">resposta</text><path d="M3,668.0625 L64,668.0625 L64,676.4141 L54,686.4141 L3,686.4141 L3,668.0625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="457" x="3" y="668.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="18" y="682.5576">alt</text><polygon fill="#181818" points="133,704.7656,123,708.7656,133,712.7656,129,708.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127" x2="359" y1="708.7656" y2="708.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="139" y="703.9092">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="157" y="703.9092">Ok</text><polygon fill="#181818" points="11,735.1172,1,739.1172,11,743.1172,7,739.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="111" y1="739.1172" y2="739.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="734.2607">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="35" y="734.2607">Ok</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3" x2="460" y1="748.1172" y2="748.1172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="41" x="8" y="759.5361">["Erro"]</text><polygon fill="#181818" points="133,781.3047,123,785.3047,133,789.3047,129,785.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="127" x2="364" y1="785.3047" y2="785.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="139" y="780.4482">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="157" y="780.4482">Erro</text><polygon fill="#181818" points="11,811.6563,1,815.6563,11,819.6563,7,815.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="111" y1="815.6563" y2="815.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="810.7998">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="35" y="810.7998">Erro</text><!--MD5=[9fdf5a7e40b1b9db6213782b24c3193c]
@startuml
autonumber

participant PisoRoute as route
participant "controller: PisoController" as ctrl
participant "dto: CriarPisoDTO" as dto
participant "service: PisoService" as service
participant "EdificioRepo" as edRepo
participant "Edificio" as edificio
participant "Ponto" as ponto
participant "Piso" as piso
participant "PontoRepo" as pontoRepo
participant "PisoRepo" as pisoRepo

[o-> route: POST(json)
activate route
route -> ctrl: criarPiso(Request, Response, Next)
activate ctrl
ctrl -> dto ** : create(json)
ctrl -> service: criarPiso(criarPisoDTO) 
activate service
service -> edRepo: findByDomain(codigo)
activate edRepo
return edificio
service -> edificio :  verificaSePisoJaExiste(nPiso)
activate edificio
return flag
service -> pisoRepo: getMaxId()
activate pisoRepo
return maxId
service -> pontoRepo: getMaxId()
activate pontoRepo
return pontoId
service -> ponto ** : criar(tipoPonto, descricao, coordenadas, IdPonto)
service -> piso ** : create(nPiso, descricao, listaPontos, maxId)
service -> edificio: addPiso(piso)
service -> pontoRepo: save(ponto)
service -> pisoRepo: save(piso)
service -> edRepo: save(edificio)
return resposta
alt
route <- - ctrl: Ok
<- - route: Ok
else "Erro"
route <- - ctrl: Erro
deactivate ctrl
<- - route: Erro
end alt
deactivate route












@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: pt
Country: PT
--></g></svg>